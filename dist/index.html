<html>
    <head>
        <script type="importmap">
            {
             "imports": {
                "vue":"https://cdnjs.cloudflare.com/ajax/libs/vue/3.4.14/vue.esm-browser.min.js",
                "jquery":"https://code.jquery.com/jquery-3.6.0.slim.min.js",
                "chart":"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js",
                "summernote":"https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.20/summernote.min.js",
                "components":"./components.esm.js"
             }
           }
       </script>
    </head>
    <body>
        <div id="main">
            <Promised :promise="promise">
                <template v-slot="{response}">
                    {{response.toString()}}
                </template>
            </Promised>
            <Promised :promise="promiseError">
                <template v-slot="response">
                    {{response}}
                </template>
            </Promised>
            <Message type="dark" :hasDelete="true" size="large">
                This is a test, this is only a test
            </Message>
            <section>
                <Component-Form :elements="elements" :translate="translate" v-on:value_changed="valueChanged"/>
            </section>

            <section>
                <Card icon="user">
                    <template #header>
                        <p class="card-header-title">
                            Card header
                          </p>
                    </template>
                    <template #content>
                        <div class="content">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec iaculis mauris.
                            <a href="#">@bulmaio</a>. <a href="#">#css</a> <a href="#">#responsive</a>
                            <br>
                            <time datetime="2016-1-1">11:09 PM - 1 Jan 2016</time>
                          </div>
                    </template>
                </Card>
            </section>
            <section>
            <Pagination :currentpage="10" :totalpages="20"/>
        </section>
        <section>
            <Menu>
                <Menu-List>
                    <Menu-Entry :active="true" title="Tasks" icon="list-check" href="#/pages/tasks">
                        <Tag :light="true" type="primary" :rounded="true" class="is-pulled-right">
                            {{ActiveTaskCount}}
                        </Tag>
                    </Menu-Entry>
                </Menu-List>
            </Menu>
        </section>
        </div>
        <script type="module">
            import { createApp,ref} from "vue";
            import {Message,ComponentForm,Promised,Pagination,Card,Menu,MenuList,MenuEntry,Tag} from 'components';

            window.lst = createApp({
                components: { 
                    Message,
                    ComponentForm,
                    Promised,
                    Pagination,
                    Card,
                    Menu,
                    MenuList,
                    MenuEntry,
                    Tag
                },
                data:()=>{
                    return {
                        ActiveTaskCount:12,
                        promise:new Promise((resolve)=>{
                            console.log('promise invoked...');
                            setTimeout(()=>resolve('testing'),15*1000)
                        }),
                        promiseError:new Promise((resolve,rejected)=>{
                            console.log('rejected invoked...');
                            setTimeout(()=>rejected('testing'),15*1000)
                        }),
                        elements:[
  {
    "type": "text",
    "subtype": "text",
    "label": "LoginForm.Username",
    "name": "uname",
    "required": true
  },
  {
    "type": "text",
    "subtype": "password",
    "label": "LoginForm.Password",
    "name": "password",
    "required": true
  }
]
                    };
                }     ,
                methods:{
                    translate :(value)=>{
                        console.log(value);
                        switch(value){
                            case 'LoginForm.Username': return 'Username';
                            case 'LoginForm.Password': return 'Password';
                            default: return value;
                        }
                    },
                    valueChanged:(value)=>{
                        console.log(value);
                    }
                }           
            }).mount('#main');
        </script>
    </body>
</html>